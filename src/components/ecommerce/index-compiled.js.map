{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;;;;;;;;;IAEM,S;;;AACF,yBAAc;AAAA;;AAAA;;AAEV,cAAK,KAAL,GAAa;AACT,kBAAM,SADG;AAET,uCAFS;AAGT,kBAAM;AAHG,SAAb;AAKA,cAAK,cAAL,GAAsB,MAAK,cAAL,CAAoB,IAApB,OAAtB;AACA,cAAK,eAAL,GAAuB,MAAK,eAAL,CAAqB,IAArB,OAAvB;AACA,cAAK,oBAAL,GAA4B,MAAK,oBAAL,CAA0B,IAA1B,OAA5B;AATU;AAUb;;;;wCAEe,O,EAAS;AACrB,gBAAI,YAAY,KAAK,KAAL,CAAW,IAA3B;AACA,gBAAI,kBAAkB,UAAU,IAAV,CAAe;AAAA,uBAAK,EAAE,EAAF,KAAS,QAAQ,EAAtB;AAAA,aAAf,CAAtB;AACA,gBAAG,eAAH,EAAoB;AAChB,4BAAY,UAAU,GAAV,CAAc,aAAK;AAC3B,wBAAG,EAAE,EAAF,IAAQ,QAAQ,EAAnB,EAAuB;AACnB,0BAAE,GAAF,GAAQ,EAAE,GAAF,GAAQ,CAAhB;AACH;AACD,2BAAO,CAAP;AACH,iBALW,CAAZ;AAMH,aAPD,MAOM;AACF,oBAAM,aAAa,OAAO,MAAP,CAAc,EAAd,EAAkB,OAAlB,EAA2B,EAAE,KAAK,CAAP,EAA3B,CAAnB;AACA,4BAAY,UAAU,MAAV,CAAiB,CAAC,UAAD,CAAjB,CAAZ;AACH;;AAED,iBAAK,QAAL,CAAc;AACV,sBAAM,SADI;AAEV,sBAAM;AAFI,aAAd;AAIH;;;6CAEoB,O,EAAS,G,EAAK;AAC/B,gBAAM,YAAY,KAAK,KAAL,CAAW,QAAX,CAAoB,GAApB,CAAwB,aAAK;AAC3C,oBAAG,EAAE,EAAF,KAAS,QAAQ,EAApB,EAAwB;AACpB,sBAAE,GAAF,GAAQ,GAAR;AACH;AACD,uBAAO,CAAP;AACH,aALiB,EAMb,MANa,CAMN;AAAA,uBAAK,EAAE,GAAF,GAAQ,CAAb;AAAA,aANM,CAAlB;;AAQA,iBAAK,QAAL,CAAc;AACV,sBAAM;AADI,aAAd;AAGH;;;uCAEc,O,EAAS;AACpB,iBAAK,QAAL,CAAc;AACV,sBAAM;AADI,aAAd;AAGH;;;qCAGY,I,EAAM;AACf,oBAAO,IAAP;AACI,qBAAK,SAAL;AACI,2BAAO;AACH,kCAAW,KAAK,KAAL,CAAW,QADnB;AAEH,qCAAc,KAAK,eAFhB,GAAP;AAGJ,qBAAK,MAAL;AACI,2BAAO;AACH,kCAAW,KAAK,KAAL,CAAW,IADnB;AAEH,0CAAmB,KAAK,oBAFrB;AAGH,oCAAa,KAAK,cAHf,GAAP;;AAKJ;AACI,2BAAO,IAAP;AAZR;AAcH;;;iCAEQ;AACL,gBAAM,YAAY,KAAK,YAAL,CAAkB,KAAK,KAAL,CAAW,IAA7B,CAAlB;AACA,mBACI;AAAA;AAAA,kBAAK,WAAU,eAAf;AACI;AAAA;AAAA;AAAA;AAAA,iBADJ;AAEM;AAFN,aADJ;AAMH;;;;;;kBAGU,S","file":"index-compiled.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\nimport { products as catalogProducts } from  '../../data/catalog';\nimport Catalog from './catalog';\nimport Cart from './cart';\n\nclass Ecommerce extends Component {\n    constructor() {\n        super();\n        this.state = {\n            page: 'catalog',\n            products: catalogProducts,\n            cart: [],\n        }\n        this.handleNavigate = this.handleNavigate.bind(this);\n        this.handleAddToCart = this.handleAddToCart.bind(this);\n        this.handleChangeQuantity = this.handleChangeQuantity.bind(this);\n    }\n\n    handleAddToCart(product) {\n        let cartItems = this.state.cart;\n        let existingProduct = cartItems.find(p => p.id === product.id);\n        if(existingProduct) {\n            cartItems = cartItems.map(p => {\n                if(p.id == product.id) {\n                    p.qty = p.qty + 1;\n                }\n                return p;\n            })\n        }else {\n            const newProduct = Object.assign({}, product, { qty: 1 });\n            cartItems = cartItems.concat([newProduct]);\n        }\n\n        this.setState({\n            cart: cartItems,\n            page: 'cart'\n        })\n    }\n\n    handleChangeQuantity(product, qty) {\n        const cartItems = this.state.products.map(p => {\n            if(p.id === product.id) {\n                p.qty = qty;\n            }\n            return p;\n        })\n            .filter(p => p.qty > 0);\n\n        this.setState({\n            cart: cartItems\n        })\n    }\n\n    handleNavigate(newPage) {\n        this.setState({\n            page: newPage\n        })\n    }\n\n\n    getComponent(page) {\n        switch(page){\n            case 'catalog':\n                return <Catalog\n                    products={ this.state.products }\n                    onAddToCart={ this.handleAddToCart } />\n            case 'cart':\n                return <Cart\n                    products={ this.state.cart }\n                    onChangeQuantity={ this.handleChangeQuantity }\n                    onNavigate={ this.handleNavigate } />\n\n            default:\n                return null;\n        }\n    }\n\n    render() {\n        const component = this.getComponent(this.state.page);\n        return (\n            <div className=\"shopping-cart\">\n                <h1>Ecommerce</h1>\n                { component }\n            </div>\n        )\n    }\n}\n\nexport default Ecommerce;\n\n"]}